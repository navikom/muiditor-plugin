var MuiditorPlugin=function(){'use strict';function a(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function b(a,b){return b={exports:{}},a(b,b.exports),b.exports}var c="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,d=b(function(a,b){var d=c&&c.__spreadArrays||function(){for(var b=0,c=0,d=arguments.length;c<d;c++)b+=arguments[c].length;for(var e=Array(b),f=0,c=0;c<d;c++)for(var g=arguments[c],a=0,h=g.length;a<h;a++,f++)e[f]=g[a];return e};b.__esModule=!0;b.URL="https://muiditor.com";var e={container:"muiditor-plugin",uid:"client_uid",secret:"client_secret"},f=function(){function a(c){var d=this;this.onMessage=function(c){var e=JSON.parse(c.data);if(c.origin===b.URL){var f=e[1];switch(e[0]){case a.FRAME_READY:d.config.onLoad&&d.config.onLoad(f),d.performAction(a.FRAME_DATA_CONFIG,d.config);break;case a.LISTENER_ON_DATA:d.config.onData&&d.config.onData(f);break;case a.LISTENER_ON_ERROR:d.config.onError&&d.config.onError(f);break;case a.LISTENER_ON_SAVE_PROJECT:d.config.onSaveProject&&d.config.onSaveProject(f);break;case a.LISTENER_ON_SAVE_COMPONENT:d.config.onSaveComponent&&d.config.onSaveComponent(f[0],f[1]);break;case a.LISTENER_ON_SWITCH_ORIENTATION:d.config.onSwitchOrientation&&d.config.onSwitchOrientation(f);break;case a.LISTENER_ON_SWITCH_OS:d.config.onSwitchOS&&d.config.onSwitchOS(f);}}},this.config=Object.assign(e,c)}return a.prototype.switchOrientation=function(){this.performAction(a.FRAME_PRO_ACTION_SWITCH_ORIENTATION)},a.prototype.setIOSMode=function(b){this.performAction(a.FRAME_PRO_ACTION_SET_IOS,b)},a.prototype.switchAutoSave=function(){this.performAction(a.FRAME_PRO_ACTION_SWITCH_AUTO_SAVE)},a.prototype.makeScreenshot=function(){this.performAction(a.FRAME_PRO_ACTION_MAKE_SCREENSHOT)},a.prototype.setProject=function(b){this.performAction(a.FRAME_PRO_ACTION_SET_PROJECT,b)},a.prototype.performAction=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.postMessage.apply(this,d([a],b))},a.prototype.getToken=function(a,b){return fetch(new Request("https://api.muiditor.com/v1/plugin/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&uid="+a+"&secret="+b})).then(function(a){return a.text()})},a.prototype.startEditor=function(b){return b.length?void this.makeFrame(b,a.TYPE_EDITOR):void alert("The token is empty")},a.prototype.startViewer=function(b){return b.length?void this.makeFrame(b,a.TYPE_VIEWER):void alert("The token is empty")},a.prototype.makeFrame=function(a,c){var d=document.getElementById(this.config.container),e=document.createElement("iframe");e.src=b.URL+"/"+c+"?token="+a,e.id=c,window.addEventListener("message",this.onMessage,!1),d&&d.appendChild(e),this.frame=e},a.prototype.postMessage=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.frame&&this.frame.contentWindow.postMessage(JSON.stringify(d([a],b)),"*")},a.prototype.dispose=function(){window.removeEventListener("message",this.onMessage,!1)},a.FRAME_READY="frame_ready",a.LISTENER_ON_DATA="editor_on_data",a.LISTENER_ON_SAVE_PROJECT="editor_on_save_project",a.LISTENER_ON_SAVE_COMPONENT="editor_on_save_component",a.LISTENER_ON_SWITCH_ORIENTATION="on_switch_orientation",a.LISTENER_ON_SWITCH_OS="on_switch_os",a.LISTENER_ON_ERROR="on_error",a.FRAME_DATA_CONFIG="config",a.FRAME_PRO_ACTION_SWITCH_ORIENTATION="switch_orientation",a.FRAME_PRO_ACTION_SET_IOS="set_ios",a.FRAME_PRO_ACTION_SWITCH_AUTO_SAVE="switch_auto_save",a.FRAME_PRO_ACTION_SET_PROJECT="set_project",a.FRAME_PRO_ACTION_MAKE_SCREENSHOT="make_screenshot",a.TYPE_EDITOR="editor",a.TYPE_VIEWER="viewer",a}();b["default"]=f});a(d);var e=d.URL,f=b(function(a,b){b.__esModule=!0,b["default"]=d["default"],Object.assign(a.exports,d["default"],d.URL)}),g=a(f);return g}();
//# sourceMappingURL=muiditor-plugin.min.js.map
